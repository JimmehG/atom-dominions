scopeName: "source.dom"
name: "Dominions"
fileTypes: ["dm"]
foldingStartMarker: "^#(selectweapon|newweapon|selectarmor|newarmor|selectmonster|newmonster|selectspell|newspell|selectitem|newitem|selectnametype|newmerc|selectsite|newsite|selectnation|newnation|selectpoptype|newevent)"
foldingStopMarker: "^#end"
patterns: [
    #A. Mod properties.
    {
        match: '^\\s*(#modname)\\s+("[^"]+")'
        captures:
            1:
                name: "keyword.control.mod.property.dominions"
            2:
                name: "string.quoted.double.dominions"
        name: "meta.mod.property.dominions"
    },

    #Multiline-string argument properties.
    {
        begin: "^\\s*(#description)\\s+(\")"
        captures:
            1:
                name: "keyword.control.mod.property.multiline.dominions"
            2:
                name: "punctuation.definition.string.begin.dominions"
        end: "\""
        endCaptures:
            0:
                name: "punctuation.definition.string.end.dominions"
        name: "string.quoted.double.multiline.dominions"
    },

    #Path-argument properties.
    {
        match: '^\\s*(#icon)\\s+("[^"]+")'
        captures:
            1:
                name: "keyword.control.mod.property.dominions"
            2:
                name: "string.quoted.double.path.dominions"
        name: "meta.mod.property.dominions"
    },

    #Version-argument properties.
    {
        match: "^\\s*(#version|#domversion)\\s+(\\d+(\\.\\d+){1,2})"
        captures:
            1:
                name: "keyword.control.mod.property.dominions"
            2:
                name: "constant.other.version.dominions"
        name: "meta.mod.property.dominions"
    },

    #B. Definition blocks.
    #B. 1. Weapons.
    {
        begin: '^\\s*(#selectweapon)\\s+(?:("[^"]+")|(\\d+))'
        beginCaptures:
            1:
                name: "keyword.control.weapon.begin.dominions"
            2:
                name: "string.quoted.double.dominions"
            3:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.weapon.end.dominions"
        name: "meta.weapon.dominions"
        patterns: [
            #Repositories.
            {
                include: "#weapons"
            },

            {
                include: "#names"
            },

            {
                include: "#comments"
            }
        ]
    },

    {
        begin: '^\\s*(#newweapon)\\s+(\\d+)'
        beginCaptures:
            1:
                name: "keyword.control.weapon.begin.dominions"
            2:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.weapon.end.dominions"
        name: "meta.weapon.dominions"
        patterns: [
            #Repositories.
            {
                include: "#weapons"
            },

            {
                include: "#names"
            },

            {
                include: "#comments"
            }
        ]
    },

    #B. 2. Armors.
    {
        begin: '^\\s*(#selectarmor)\\s+(?:("[^"]+")|(\\d+))'
        beginCaptures:
            1:
                name: "keyword.control.armor.begin.dominions"
            2:
                name: "string.quoted.double.dominions"
            3:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.armor.end.dominions"
        name: "meta.armor.dominions"
        patterns: [
            {
                include: "#armors"
            },

            {
                include: "#names"
            },

            {
                include: "#comments"
            }

        ]
    },

    {
        begin: '^\\s*(#newarmor)\\s+(\\d+)'
        beginCaptures:
            1:
                name: "keyword.control.armor.begin.dominions"
            2:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.armor.end.dominions"
        name: "meta.armor.dominions"
        patterns: [
            {
                include: "#armors"
            },

            {
                include: "#names"
            },

            {
                include: "#comments"
            }
        ]
    },

    #B. 3. Units.
    {
        begin: '^\\s*(#selectmonster)\\s+(?:("[^"]+")|(\\d+))'
        beginCaptures:
            1:
                name: "keyword.control.monster.begin.dominions"
            2:
                name: "string.quoted.double.dominions"
            3:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.monster.end.dominions"
        name: "meta.monster.dominions"
        patterns: [
            {
                include: "#monster_items"
            },

            {
                include: "#monsters"
            },

            {
                include: "#names"
            },

            {
                include: "#descriptions"
            },

            {
                include: "#comments"
            }
        ]
    },

    {
        begin: '^\\s*(#newmonster)(?:\\s+(\\d+))?'
        beginCaptures:
            1:
                name: "keyword.control.monster.begin.dominions"
            2:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.monster.end.dominions"
        name: "meta.monster.dominions"
        patterns: [
            {
                include: "#monster_items"
            },

            {
                include: "#monsters"
            },

            {
                include: "#names"
            },

            {
                include: "#descriptions"
            },

            {
                include: "#comments"
            }
        ]
    },

    #B. 4. Nametypes.
    {
        begin: "^\\s*(#selectnametype)\\s+(\\d+)"
        beginCaptures:
            1:
                name: "keyword.control.nametype.begin.dominions"
            2:
                name: "constant.numeric.positive.dominions"
        end: "^(#end)"
        endCaptures:
            1:
                name: "keyword.control.nametype.end.dominions"
        name: "meta.nametype.dominions"
        patterns: [
            #Commands.
            {
                match: "^\\s*(#clear)"
                name: "keyword.control.nametype.command.dominions"
            },

            {
                match: '^\\s*(#addname)\\s+("[^"]+")'
                captures:
                    1:
                        name: "keyword.control.nametype.command.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                name: "meta.nametype.element.dominions"
            },

            #Repository: comments.
            {
                include: "#comments"
            }
        ]
    },

    #B. 5. Sites.
    {
        begin: '^\\s*(#selectsite)\\s+(?:("[^"]+")|(\\d+))'
        beginCaptures:
            1:
                name: "keyword.control.site.begin.dominions"
            2:
                name: "string.quoted.double.dominions"
            3:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.site.end.dominions"
        name: "meta.site.dominions"
        patterns: [
            #Repositories.
            {
                include: "#sites"
            },

            {
                include: "#names"
            },

            {
                include: "#comments"
            }
        ]
    },

    {
        begin: '^\\s*(#newsite)(?:\\s+(\\d+))?'
        beginCaptures:
            1:
                name: "keyword.control.site.begin.dominions"
            2:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.site.end.dominions"
        name: "meta.site.dominions"
        patterns: [
            #Repositories.
            {
                include: "#sites"
            },

            {
                include: "#names"
            },

            {
                include: "#comments"
            }
        ]
    },

    #B. 6. Nations.
    #Global commands.
    {
        match: '^\\s*(#indepflag)\\s+("[^"]+")'
        captures:
            1:
                name: "keyword.control.mod.property.dominions"
            2:
                name: "string.quoted.double.path.dominions"
        name: "meta.mod.property.dominions"
    },

    {
        match: '^\\s*(#disableoldnations)'
        captures:
            1:
                name: "keyword.control.mod.property.dominions"
        name: "meta.mod.property.dominions"
    },

    #Definition blocks.
    {
        begin: '^\\s*(#selectnation)\\s+(\\d+)'
        beginCaptures:
            1:
                name: "keyword.control.nation.begin.dominions"
            2:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.nation.end.dominions"
        name: "meta.nation.dominions"
        patterns: [
            #Repositories.
            {
                include: "#nations"
            },

            {
                include: "#poptypes"
            },

            {
                include: "#names"
            },

            {
                include: "#descriptions"
            },

            {
                include: "#comments"
            }
        ]
    },

    {
        begin: '^\\s*(#newnation)'
        beginCaptures:
            1:
                name: "keyword.control.nation.begin.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.nation.end.dominions"
        name: "meta.nation.dominions"
        patterns: [
            #Repositories.
            {
                include: "#nations"
            },

            {
                include: "#poptypes"
            },

            {
                include: "#names"
            },

            {
                include: "#descriptions"
            },

            {
                include: "#comments"
            }
        ]
    },

    #B. 7. Spells.
    #Global commands.
    {
        match: "^\\s*(#clearallspells)"
        captures:
            1:
                name: "keyword.control.command.spell.dominions"
        name: "meta.command.spell.dominions"
    },

    {
        begin: '^\\s*(#selectspell)\\s+(?:("[^"]+")|(\\d+))'
        beginCaptures:
            1:
                name: "keyword.control.spell.begin.dominions"
            2:
                name: "string.quoted.double.dominions"
            3:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.spell.end.dominions"
        name: "meta.spell.dominions"
        patterns: [
            {
                include: "#spells"
            },

            {
                include: "#names"
            },

            {
                include: "#descriptions"
            },

            {
                include: "#comments"
            }
        ]
    },

    {
        begin: '^\\s*(#newspell)(?:\\s+(\\d+))?'
        beginCaptures:
            1:
                name: "keyword.control.spell.begin.dominions"
            2:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.spell.end.dominions"
        name: "meta.spell.dominions"
        patterns: [
            {
                include: "#spells"
            },

            {
                include: "#names"
            },

            {
                include: "#descriptions"
            },

            {
                include: "#comments"
            }
        ]
    },

    #B. 8. Magic Items.
    #Global commands.
    {
        match: "^\\s*(#clearallitems)"
        captures:
            1:
                name: "keyword.control.command.item.dominions"
        name: "meta.command.item.dominions"
    },

    #Definition blocks.
    {
        begin: '^\\s*(#selectitem)\\s+(?:("[^"]+")|(\\d+))'
        beginCaptures:
            1:
                name: "keyword.control.item.begin.dominions"
            2:
                name: "string.quoted.double.dominions"
            3:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.item.end.dominions"
        name: "meta.item.dominions"
        patterns: [
            {
                include: "#monster_items"
            },

            {
                include: "#items"
            },

            {
                include: "#names"
            },

            {
                include: "#descriptions"
            },

            {
                include: "#comments"
            }
        ]
    },

    {
        begin: '^\\s*(#newitem)(?:\\s+(\\d+))?'
        beginCaptures:
            1:
                name: "keyword.control.item.begin.dominions"
            2:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.item.end.dominions"
        name: "meta.item.dominions"
        patterns: [
            {
                include: "#monster_items"
            },

            {
                include: "#items"
            },

            {
                include: "#names"
            },

            {
                include: "#descriptions"
            },

            {
                include: "#comments"
            }
        ]
    },

    #B. 9. General.
    #Global commands.
    {
        match: '^\\s*(#poppergold|#unresthalfinc|#unresthalfres|#deathdeath|#tempscalecap|#researchscale)\\s+(\\d+)'
        captures:
            1:
                name: "keyword.control.mod.property.dominions"
            2:
                name: "constant.numeric.positive.dominions"
        name: "meta.mod.property.dominions"
    },

    {
        match: '^\\s*(#resourcemult|#supplymult|#eventisrare|#turmoilincome|#turmoilevents|#deathincome|#deathsupply|#slothincome|#slothresources|#coldincome|#coldsupply|#misfortune|#luckevents)\\s+(\\d+)'
        captures:
            1:
                name: "keyword.control.mod.property.dominions"
            2:
                name: "constant.numeric.percentage.dominions"
        name: "meta.mod.property.dominions"
    },

    #B. 10. Poptypes.
    #Definition blocks.
    {
        begin: '^\\s*(#selectpoptype)\\s+(\\d+)'
        beginCaptures:
            1:
                name: "keyword.control.poptype.begin.dominions"
            2:
                name: "constant.numeric.positive.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.poptype.end.dominions"
        name: "meta.poptype.dominions"
        patterns: [
            {
                match: '^\\s*((?:#defcom1|(?:#defunit(?:1b|1c|1)))\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.poptype.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.poptype.property.dominions"
            },

            {
                match: '^\\s*(#defmult(?:1b|1c|1))\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.poptype.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.poptype.property.dominions"
            },

            #Repositories.
            {
                include: "#poptypes"
            },

            {
                include: "#comments"
            }
        ]
    },

    #B. 11. Mercenaries.
    #Global commands.
    {
        match: "^\\s*(#clearmercs)"
        captures:
            1:
                name: "keyword.control.command.merc.dominions"
        name: "meta.command.merc.dominions"
    },

    #Definition block.
    {
        begin: "^\\s*(#newmerc)"
        beginCaptures:
            1:
                name: "keyword.control.merc.begin.dominions"
        end: "^(#end)"
        endCaptures:
            1:
                name: "keyword.control.merc.end.dominions"
        name: "meta.merc.dominions"
        patterns: [
            {
                match: '^\\s*(#bossname|#com|#unit|#item)\\s+("[^"]+")'
                captures:
                    1:
                        name: "keyword.control.merc.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                name: "meta.merc.property.dominions"
            },

            {
                match: "^\\s*(#nrunits|#minmen|#minpay|#xp|#recrate)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.merc.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.merc.property.dominions"
            },

            {
                match: "^\\s*(#level)\\s+([0-2])"
                captures:
                    1:
                        name: "keyword.control.merc.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.merc.property.dominions"
            },

            {
                match: "^\\s*(#randequip)\\s+([0-3])"
                captures:
                    1:
                        name: "keyword.control.merc.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.merc.property.dominions"
            },

            {
                match: "^\\s*(#eramask)\\s+([1-7])"
                captures:
                    1:
                        name: "keyword.control.merc.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.merc.property.dominions"
            },

            #Repositories.
            {
                include: "#names"
            },

            {
                include: "#comments"
            }
        ]
    },

    #B. 12. Events.
    #Definition blocks.
    {
        begin: '^\\s*(#newevent)'
        beginCaptures:
            1:
                name: "keyword.control.event.begin.dominions"
        end: "^\\s*(#end)"
        endCaptures:
            1:
                name: "keyword.control.event.end.dominions"
        name: "meta.event.dominions"
        patterns: [
            #Repositories.
            {
                include: "#events"
            },

            {
                include: "#comments"
            }
        ]
    },

    #Repositories.
    {
        include: "#comments"
    }
]

repository:
    comments:
        patterns: [
            {
                match: "--(.*)$"
                name: "comment.line.double-dash.dominions"
            }
        ]

    names:
        patterns: [
            {
                match: '^\\s*(#name)\\s+("[^"]+")'
                captures:
                    1:
                        name: "keyword.control.name.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                name: "meta.name.property.dominions"
            }
        ]

    descriptions:
        patterns: [
            {
                begin: '^\\s*(#descr)\\s+(\")'
                captures:
                    1:
                        name: "keyword.control.description.property.multiline.dominions"
                    2:
                        name: "punctuation.definition.string.begin.dominions"
                end: '\"'
                endCaptures:
                    0:
                        name: "punctuation.definition.string.end.dominions"
                name: "string.quoted.double.description.property.dominions"
            }
        ]

    weapons:
        patterns: [
            #Basic commands.
            {
                match: "^\\s*(#copyweapon)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.weapon.command.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.weapon.command.dominions"
            },

            #A. Basic properties.
            {
                match: "^\\s*(#twohanded|#natural)"
                captures:
                    1:
                        name: "keyword.control.weapon.property.dominions"
                name: "meta.weapon.property.dominions"
            },

            #Path-argument properties.
            {
                match: '^\\s*(#sample)\\s+("[^"]+")'
                captures:
                    1:
                        name: "keyword.control.weapon.property.dominions"
                    2:
                        name: "string.quoted.double.path.dominions"
                name: "meta.weapon.property.dominions"
            },

            {
                match: "^\\s*(#sound|#ammo|#rcost)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.weapon.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.weapon.property.dominions"
            },

            {
                match: "^\\s*(#dmg|#nratt|#att|#def|#prec|#range)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.weapon.property.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.weapon.property.dominions"
            },

            {
                match: "^\\s*(#len)\\s+([0-6])"
                captures:
                    1:
                        name: "keyword.control.weapon.property.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.weapon.property.dominions"
            },

            #B. Damage types.
            {
                match: "^\\s*(#dt_normal|#dt_poison|#dt_demon|#dt_small|#dt_magic|#dt_large|#dt_constructonly|#dt_raise|#dt_cap|dt_weakness|#dt_holy|#dt_drain|#dt_sizestun|#dt_weapondrain|#dt_stun|#dt_realstun|#dt_interrupt|#dt_bouncekill|#dt_paralyze|#dt_aff)"
                captures:
                    1:
                        name: "keyword.control.weapon.property.damtype.dominions"
                name: "meta.weapon.property.damtype.dominions"
            },

            #C. Damage qualifiers.
            {
                match: "^\\s*(#poison|#acid|#slash|#pierce|#blunt|#cold|#fire|#shock|#magic|#armorpiercing|#armornegating|#nostr|#bowstr|#halfstr|#fullstr|#mrnegates|#mrnegateseasily|#hardmrneg|#sizeresist|#mind|#undeadimmune|#inanimateimmune|#flyingimmune|#enemyimmune|#friendlyimmune|#undeadonly|#demononly|#sacredonly|#demonundead|#internal)"
                captures:
                    1:
                        name: "keyword.control.weapon.property.damqualifier.dominions"
                name: "meta.weapon.property.damqualifier.dominions"
            },

            #D. Other properties.
            {
                match: "^\\s*(#bonus|#ironweapon|#woodenweapon|#iceweapon|#charge|#flail|#norepel|#unrepel|#beam|#range050|#range0|#melee50|#skip|#skip2|#uwok|#nouw)"
                captures:
                    1:
                        name: "keyword.control.weapon.property.other.dominions"
                name: "meta.weapon.property.other.dominions"
            },

            {
                match: "^\\s*(#aoe|#secondaryeffect|#secondaryeffectalways|#explspr)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.weapon.property.other.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.weapon.property.other.dominions"
            },

            {
                match: "^\\s*(#flyspr)\\s+(\\d+)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.weapon.property.other.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.weapon.property.other.dominions"
            }
        ]

    armors:
        patterns: [
            #Basic commands.
            {
                match: "^\\s*(#copyarmor)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.weapon.command.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.weapon.command.dominions"
            },

            #Properties.
            {
                match: "^\\s*(#def)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.armor.property.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.armor.property.dominions"
            },

            {
                match: "^\\s*(#prot|#rcost|#enc)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.armor.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.armor.property.dominions"
            },

            {
                match: "^\\s*(#type)\\s+([4-6]|9)"
                captures:
                    1:
                        name: "keyword.control.armor.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.armor.property.dominions"
            },

            {
                match: "^\\s*(#magicarmor|#ironarmor|#woodenarmor)"
                captures:
                    1:
                        name: "keyword.control.armor.property.dominions"
                name: "meta.armor.property.dominions"
            }
        ]

    #Rules that apply to monsters or items.
    monster_items:
        patterns: [
            #A. Basic Attributes.
            {
                match: "^\\s*(#hp|#str|#att|#def|#prec|#prot|#mr|#mor|#enc|#mapmove|#ap|#eyes|#voidsanity)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.attribute.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster_item.property.attribute.dominions"
            },

            #B. Abilities.
            #B. 1. Movement.
            {
                match: "^\\s*(#float|#stormimmune|#unteleportable|#noriverpass|#nomovepen)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                match: "^\\s*(#giftofwater|#farsail)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            #B. 2. Stealthy.
            {
                match: "^\\s*(#scalewalls)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                match: "^\\s*(#seduce|#succubus|#stealthy|#patience|#beckon|#falsearmy|#foolscouts)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            #B. 3. Age, healing and afflictions
            {
                match: "^\\s*(#hpoverflow)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            #TODO: hpoverslow is capped at 1000%.
            {
                match: "^\\s*(#uwdamage|#landdamage|#healer|#homesick|#diseaseres|#hpoverslow)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                match: "^\\s*(#autohealer|#autodishealer|#autodisgrinder|#regeneration|#woundfend)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                match: "^\\s*(#reinvigoration)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            #In this order to let healer catch first.
            {
                match: "^\\s*(#heal)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            #B. 4. Damage reduction.
            {
                match: "^\\s*(#bluntres|#ethereal|#pierceres|#slashres)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                match: "^\\s*(#airshield)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                match: "^\\s*(#invulnerable)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                match: "^\\s*(#coldres|#fireres|#poisonres|#shockres|#iceprot)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            #B. 5. Auras.
            {
                match: "^\\s*(#entangle|#eyeloss|#horrormark)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            #TODO: uwheat has values 0-100.
            #TODO: poisonskin has values 0-500.
            #TODO: clouds has a size value.
            #TODO: minbdslime has an area value.
            {
                match: "^\\s*(#heat|#cold|#uwheat|#poisonskin|#poisoncloud|#diseasecloud|#animalawe|#awe|#fear|#fireshield|#uwfireshield|#banefireshield|#acidshield|#damagerev|#bloodvengeance|#slimer|#poisonarmor|#mindslime|#overcharged)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            #B. 6. Powers.
            {
                match: "^\\s*(#springpower|#summerpower|#fallpower|#winterpower)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                match: "^\\s*(#chaospower|#coldpower|#firepower|#deathpower|#darkpower|#stormpower|#magicpower|#slothpower)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            #B. 7. Combat.
            {
                match: "^\\s*(#blessbers|#blessfly|#deathcurse|#trampswallow|#trample)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                #TODO: deathdisease, etc. have area values.
                #TODO: raiseonkill has chance value.
                match: "^\\s*(#ambidextrous|#berserk|#deathdisease|#deathparalyze|#deathfire|#guardspiritbonus|#raiseonkill|#digest|#aciddigest|#incorporate|#unsurr)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                match: "^\\s*(#darkvision)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                match: '^\\s*(#raiseshape)\\s+(?:("[^"]+")|(-?\\d+))'
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            #B. 8. Support.
            {
                match: "^\\s*(#inquisitor|#taxcollector)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                #TODO: spreaddom is a candles value.
                #TODO: nobadevents is a chance value.
                match: "^\\s*(#castledef|#siegebonus|#elegist|#spreaddom|#nobadevents|#incprovdef|#addupkeep|#popkill|#xploss)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                match: "^\\s*(#shatteredsoul|#leper|#insane|#insanify)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                match: "^\\s*(#heretic)\\s+([0-5])"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            {
                match: "^\\s*(#patrolbonus|#pillagebonus|#supplybonus|#resources|#iceforging|#incunrest|#gold)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.ability.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster_item.property.ability.dominions"
            },

            #B. 9. Summoning.
            {
                match:               '\\s*(#domsummon2|#domsummon20|#domsummon|#raredomsummon|#templetrainer|(?:#makemonsters[1-5])|(?:#summon[1-5])|(?:#battlesum[1-5])|(?:#batstartsum[1-9]d6)|(?:#batstartsum[1-5]))\\s+(?:("[^"]+")|(-?\\d+))'
                captures:
                    1:
                        name: "keyword.control.monster_item.property.summon.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster_item.property.summon.dominions"
            },

            #B. 10. Leadership.
            {
                match: "^\\s*(#command|#magiccommand|#undcommand)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.leadership.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster_item.property.leadership.dominions"
            },

            #B. 11. Morale properties.
            {
                match: "^\\s*(#slave|#undisciplined)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.morale.dominions"
                name: "meta.monster_item.property.morale.dominions"
            },

            #TODO: skirmisher varies between -25 and 25.
            {
                match: "^\\s*(#inspirational|#beastmaster|#taskmaster|#skirmisher|#bodyguard)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.morale.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster_item.property.morale.dominions"
            },

            {
                match: "^\\s*(#formationfighter|#standard)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.morale.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.morale.dominions"
            },

            #B. 12. Magic.
            {
                match:"^\\s*(#magicboost)\\s+([0-8]|5[0-3])\\s+(-?[0-5])"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                    3:
                        name: "constant.numeric.enum.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            #B. 13. Rituals.
            {
                match:"^\\s*(#masterrit)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            {
                match:"^\\s*(#firerange|#airrange|#waterrange|#earthrange|#astralrange|#deathrange|#naturerange|#bloodrange|#elementrange|#sorceryrange|#allrange)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            #B. 14. Research.
            {
                match: "^\\s*(#drainimmune|#magicimmune|#divineins)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            {
                match:"^\\s*(#researchbonus|#slothresearch)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            {
                match:"^\\s*(#inspiringres)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            #B. 15. Gem production.
            {
                match:"^\\s*(#gemprod)\\s+([0-7])\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            {
                match:"^\\s*(#tmpfiregems|#tmpairgems|#tmpwatergems|#tmpearthgems|#tmpastralgems|#tmpdeathgems|#tmpnaturegems|#tmpbloodslaves|#douse|#makepearls)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            #B. 16. Other magic abilities.
            {
                match:"^\\s*(#bonusspells|#crossbreeder|#kokytosret|#infernoret|#voidret|#allret|#tainted)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            {
                match:"^\\s*(#randomspell|#forgebonus)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.percent.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            {
                match:"^\\s*(#deathbanish)\\s+(-1[1-3])"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            {
                match:"^\\s*(#mastersmith|#fixforgebonus)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.magic.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster.property.magic.dominions"
            },

            {
                match:"^\\s*(#comslave|#commaster)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            #B. 17. Undocumented dom5 abilities.
            {
                match:"^\\s*(#mason|#spiritsight|#invisible|#doheal|#spellsinger|#reanimpriest|#norange|#polyimmune|#combatcaster)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            #TODO: all command arguments vary between -1000 and 1000 except as follows:
            #TODO: bringeroffortune varies between -100 and 100.
            {
                match:"^\\s*(#onisummon|#curseluckshield|#sunawe|#fastcast|#undregen|#magicstudy|#yearturn|#fortkill|#thronekill|#farthronekill|#bringeroffortune)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            #TODO: startmajoraff varies between 0 and 1000.
            #TODO: triplegod, indepstay varies between 0 and 10.
            match:"^\\s*(#startmajoraff|#triplegod|#indepstay)\\s+(\\d+)"
            {
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            {
                match:"^\\s*(#indepmove)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            {
                match:"^\\s*(#minprison)\\s+([0-2])"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.monster_item.property.magic.dominions"
            },

            {
                match:"^\\s*(#minsizeleader)\\s+([0-6])"
                captures:
                    1:
                        name: "keyword.control.monster_item.property.magic.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.monster_item.property.magic.dominions"
            }
        ]

    monsters:
        patterns: [
            #A. Commands.
            {
                match: "^\\s*(#copystats|#copyspr)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.command.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.command.dominions"
            },

            {
                match: "^\\s*(#clearweapons|#cleararmor|#clearmagic|#clearspec|#clear)"
                captures:
                    1:
                        name: "keyword.control.monster.command.dominions"
                name: "meta.monster.command.dominions"
            },

            #B. Basic Properties.
            {
                match: '^\\s*(#fixedname)\\s+("[^"]+")'
                captures:
                    1:
                        name: "keyword.control.monster.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                name: "meta.monster.property.dominions"
            },

            #Visual properties.
            {
                match: '^\\s*(#spr1|#spr2)\\s+("[^"]+")'
                captures:
                    1:
                        name: "keyword.control.monster.property.dominions"
                    2:
                        name: "string.quoted.double.path.dominions"
                name: "meta.monster.property.dominions"
            },

            {
                match: "^\\s*(#speciallook)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.dominions"
            },

            #C. Pretender god properties.
            {
                match: "^\\s*(#pathcost|#startdom|#homerealm)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.god.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.god.dominions"
            },

            {
                match: "^\\s*(#homerealm)\\s+(10|[0-9])"
                captures:
                    1:
                        name: "keyword.control.monster.property.god.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.monster.property.god.dominions"
            },

            #D. Recruitment rules.
            {
                match: "^\\s*(#slowrec|#noslowrec|#reqlab|#reqtemple|#aisinglerec|#ainorec)"
                captures:
                    1:
                        name: "keyword.control.monster.property.recruit.dominions"
                name: "meta.monster.property.recruit.dominions"
            },

            {
                match: "^\\s*(#reclimit|#enchrebate50)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.recruit.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.recruit.dominions"
            },

            {
                #Montag negative numbers can be used.
                match: '^\\s*(#monpresentrec|#ownsmonrec)\\s+(?:("[^"]+")|(-?\\d+))'
                captures:
                    1:
                        name: "keyword.control.monster.property.recruit.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster.property.recruit.dominions"
            },

            {
                match: "^\\s*(#heatrec|#coldrec)\\s+([1-3])"
                captures:
                    1:
                        name: "keyword.control.monster.property.recruit.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.monster.property.recruit.dominions"
            },

            {
                match: "^\\s*(#chaosrec|#deathrec)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.recruit.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.recruit.dominions"
            },

            #E. Desertion rules.
            {
                match: "^\\s*(#singlebattle|#nowish)"
                captures:
                    1:
                        name: "keyword.control.monster.property.desertion.dominions"
                name: "meta.monster.property.desertion.dominions"
            },

            {
                match: "^\\s*(#deserter|#horrordeserter|#defector)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.recruit.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.monster.property.recruit.dominions"
            },

            #F. Cost properties.
            {
                match: "^\\s*(#gcost|#rcost|#rpcost|#ressize)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.dominions"
            },

            #G. Attributes.
            #note: see monster_items for other attributes.
            {
                match: "^\\s*(#size)\\s+([1-6])"
                captures:
                    1:
                        name: "keyword.control.monster.property.attribute.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.monster.property.attribute.dominions"
            },

            {
                match: "^\\s*(#incscale|#decscale)\\s+([0-5])"
                captures:
                    1:
                        name: "keyword.control.monster.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.monster.property.dominions"
            },

            #H. Weapons and armor.
            {
                match: '^\\s*(#weapon|#armor)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.monster.property.equipment.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.equipment.dominions"
            },

            #L. 5. Tattoos.
            #note: #snaketattoo has to be before #snake, so parser can pick it up.
            {
                match: "^\\s*(#beartattoo|#horsetattoo|#wolftattoo|#boartattoo|#snaketattoo)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.tattoo.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.tattoo.dominions"
            },

            #I. Bodytype.
            {
                match: "^\\s*(#humanoid|#mountedhumanoid|#quadruped|#lizard|#naga|#snake|#bird|#djinn|#troglodyte|#miscshape)"
                captures:
                    1:
                        name: "keyword.control.monster.property.bodytype.dominions"
                name: "meta.monster.property.bodytype.dominions"
            },

            #J. Item slots.
            {
                match: "^\\s*(#noitem)"
                captures:
                    1:
                        name: "keyword.control.monster.property.equipment.dominions"
                name: "meta.monster.property.equipment.dominions"
            },

            #TODO: itemslots really uses an enum value.
            {
                match: "^\\s*(#userestricteditem|#itemslots)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.equipment.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.equipment.dominions"
            },

            #Bug: 5.09 startitem does not work with names.
            {
                match: '^\\s*(#startitem)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.monster.property.equipment.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.equipment.dominions"
            },

            #L. Abilities.
            #L. 1. Type and Status.
            {
                match: "^\\s*(#female|#coldblood|#immortal|#domimmortal|#drake|#plant|#lesserhorror|#greaterhorror|#doomhorror|#mounted|#holy|#animal|#unique|#undead|#bug|#demon|#magicbeing|#autocompete|#blind|#uwbug|#stonebeing|#inanimate|#dungeon)"
                captures:
                    1:
                        name: "keyword.control.monster.property.ability.dominions"
                name: "meta.monster.property.ability.dominions"
            },

            #L. 2. Movement.
            #note: see monster_items for other movement properties shared with items.
            {
                match: "^\\s*(#immobile|#aquatic|#amphibian|#pooramphibian|#float|#flying|#swimming|#snow|#stormimmune|#teleport|#mapteleport|#blink|#unteleportable|#noriverpass|#forestsurvival|#mountainsurvival|#swampsurvival|#wastesurvival)"
                captures:
                    1:
                        name: "keyword.control.monster.property.ability.dominions"
                name: "meta.monster.property.ability.dominions"
            },

            {
                match: "^\\s*(#indepmove)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.ability.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.monster.property.ability.dominions"
            },

            {
                match: "^\\s*(#sailing)\\s+(\\d+)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.ability.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.ability.dominions"
            },

            #L. 3. Stealth.
            #note: see monster_items for other movement properties shared with items.
            {
                match: "^\\s*(#illusion|#spy|#assassin)"
                captures:
                    1:
                        name: "keyword.control.monster.property.ability.dominions"
                name: "meta.monster.property.ability.dominions"
            },

            #L. 4. Age, healing and afflictions.
            #note: see monster_items for other age and healing properties shared with items.
            {
                match: "^\\s*(#noheal)"
                captures:
                    1:
                        name: "keyword.control.monster.property.ability.dominions"
                name: "meta.monster.property.ability.dominions"
            },

            #TODO: startingaff argument is really a bitmask.
            {
                match: "^\\s*(#startage|#maxage|#addrandomage|#startaff|#startingaff)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.ability.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.ability.dominions"
            },

            {
                match: "^\\s*(#startaff)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.ability.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.monster.property.ability.dominions"
            },

            {
                match: "^\\s*(#older)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.ability.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster.property.ability.dominions"
            },

            #L. 6. Support.
            {
                match: "^\\s*(#neednoteat|#nohof)"
                captures:
                    1:
                        name: "keyword.control.monster.property.ability.dominions"
                name: "meta.monster.property.ability.dominions"
            },

            #L. 7. Shapechanging.
            {
                match: '^\\s*(#shapechange|#firstshape|#secondshape|#secondtmpshape|#forestshape|#plainshape|#foreignshape|#homeshape|#springshape|#summershape|#autumnshape|#wintershape|#landshape|#watershape)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.monster.property.shape.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.shape.dominions"
            },

            {
                match: '^\\s*(#prophetshape)\\s+(?:("[^"]+")|(-?\\d+))'
                captures:
                    1:
                        name: "keyword.control.monster.property.shape.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster.property.shape.dominions"
            },

            {
                match: "^\\s*(#cleanshape)"
                captures:
                    1:
                        name: "keyword.control.monster.property.shape.dominions"
            },

            {
                match: "^\\s*(#growhp|#shrinkhp|#xpshape)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.shape.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.shape.dominions"
            },

            {
                match: "^\\s*(#(?:fire|air|water|earth|astral|death|nature|blood|holy)attuned)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.shape.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.shape.dominions"
            },

            {
                match: "^\\s*(#transformation)\\s+(-1|0|1)"
                captures:
                    1:
                        name: "keyword.control.monster.property.shape.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.monster.property.shape.dominions"
            },

            #L. 8. Summoning.
            #note: see monster_items for other summoning properties shared with items.
            {
                match: "^\\s*(#reanimator|#montag)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.summon.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.summon.dominions"
            },

            #L. 9. Nametypes.
            {
                #TODO: value is atm capped at 299.
                match: "^\\s*(#nametype)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.nametype.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.nametype.dominions"
            },

            #L. 10. Leadership.
            #note: see monster_items for other leadership properties shared with items.
            {
                match: "^\\s*(#noleader|#poorleader|#okleader|#goodleader|#expertleader|#superiorleader|#nomagicleader|#poormagicleader|#okmagicleader|#goodmagicleader|#expertmagicleader|#superiormagicleader|#noundeadleader|#poorundeadleader|#okundeadleader|#goodundeadleader|#expertundeadleader|#superiorundeadleader|#almostundead|#almostliving)"
                captures:
                    1:
                        name: "keyword.control.monster.property.leadership.dominions"
                name: "meta.monster.property.leadership.dominions"
            },

            #L. 11. Morale.
            #note: see monster_items for other leadership properties shared with items.

            #L. 12. Magic.
            #note: see monster_items for other magic properties shared with items.
            {
                match:"^\\s*(#magicskill)\\s+([0-8]|5[0-3])\\s+([0-9]|10)"
                captures:
                    1:
                        name: "keyword.control.monster.property.magic.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                    3:
                        name: "constant.numeric.enum.dominions"
                name: "meta.monster.property.magic.dominions"
            },

            {
                match:"^\\s*(#custommagic)\\s+(\\d+)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.magic.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.magic.dominions"
            },

            #L. 13. Research.
            #note: see monster_items for other research properties shared with items.
            {
                match:"^\\s*(#fixedresearch)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.magic.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.magic.dominions"
            },

            #L. 14. Other magic abilities.
            #note: see monster_items for other magic ability properties shared with items.
            {
                match: '^\\s*(#onebattlespell)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.monster.property.magic.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.monster.property.magic.dominions"
            },

            #L. 15. Undocumented dom5 abilities.
            #note: see monster_items for other dom5 undocumented properties shared with items.
            {
                match:"^\\s*(#unify|#triple3mon)"
                captures:
                    1:
                        name: "keyword.control.monster.property.magic.dominions"
                name: "meta.monster.property.magic.dominions"
            },

            #TODO: triplegodmag varies between -10 and 10.
            {
                match:"^\\s*(#triplegodmag)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.monster.property.magic.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.monster.property.magic.dominions"
            }
        ]

    sites:
        patterns: [
            #A. Commands.
            {
                match: "^\\s*(#clear)"
                captures:
                    1:
                        name: "keyword.control.site.command.dominions"
                name: "meta.site.command.dominions"
            },

            #B. Basic properties.
            {
                match: "^\\s*(#path)\\s+([0-8])"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.site.property.dominions"
            },

            {
                match: "^\\s*(#level)\\s+([0-6])"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.site.property.dominions"
            },

            {
                match: "^\\s*(#rarity)\\s+(0|2|5|11|12|13|1)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.site.property.dominions"
            },

            {
                match: "^\\s*(#loc)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.site.property.dominions"
            },

            {
                match: "^\\s*(#gold|#res|#supply|#decunrest)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.site.property.dominions"
            },

            {
                match: "^\\s*(#gems)\\s+([0-7])\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.site.property.dominions"
            },

            #C. Buildings and recruits.
            {
                match: "^\\s*(#lab|#temple)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                name: "meta.site.property.dominions"
            },

            {
                match: "^\\s*(#fort|#wallmult|#uwwallmult)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.site.property.dominions"
            },

            {
                match: "^\\s*(#voidgate)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.percent.dominions"
                name: "meta.site.property.dominions"
            },

            {
                match: '^\\s*(#homecom|#homemon|#com|#mon|#summonlvl[2-4]|#summon|#wallunit|#wallcom|#uwwallunit|#uwwallcom)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.site.property.dominions"
            },

            #D. Scales.
            {
                match: "^\\s*(#incscale|#decscale)\\s+([0-5])"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.site.property.dominions"
            },

            #E. Rituals.
            {
                match: "^\\s*(#conjcost|#altcost|#evocost|#constcost|#enchcost|#thaucost|#bloodcost|#scry|#firerange|#airrange|#waterrange|#earthrange|#astralrange|#deathrange|#naturerange|#bloodrange|#elementrange|#sorceryrange|#allrange)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.site.property.dominions"
            },

            #F. Effects.
            {
                match: "^\\s*(#heal|#curse|#cluster|#xp)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.site.property.dominions"
            },

            {
                match: "^\\s*(#disease|#horrormark|#holyfire|#holypower|#adventureruin)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.percent.dominions"
                name: "meta.site.property.dominions"
            },

            #G. Throne effects.
            {
                match: "^\\s*(#claim)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                name: "meta.site.property.dominions"
            },

            {
                match: "^\\s*(#evil|#wild)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                name: "meta.site.property.dominions"
            },

            {
                match: "^\\s*(#dominion)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.site.property.dominions"
            },

            {
                match: "^\\s*(#goddomchaos|#goddomlazy|#goddomcold|#goddomdeath|#goddommisfortune|#goddomdrain)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.site.property.dominions"
            },

            #H. Throne bless effects.
            {
                match: "^\\s*(#blesshp|#blessanimawe|#blessmr|#blessawe|#blessmor|#blessstr|#blessdarkvis|#blessatt|#blessdef|#blessprec|#blessfireres|#blesscoldres|#blessshockres|#blesspoisres|#blessairshld|#blessreinvig|#blessdtv|#recallgod|#domwar)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.site.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.site.property.dominions"
            }
        ]

    nations:
        patterns: [
            #A. General commands.
            {
                match: "^\\s*(#clearnation)"
                captures:
                    1:
                        name: "keyword.control.nation.command.dominions"
                name: "meta.nation.command.dominions"
            },

            {
                match: '^\\s*(#epithet|#brief)\\s+("[^"]+")'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                begin: "^\\s*(#summary)\\s+(\")"
                captures:
                    1:
                        name: "keyword.control.nation.property.multiline.dominions"
                    2:
                        name: "punctuation.definition.string.begin.dominions"
                end: "\""
                endCaptures:
                    0:
                        name: "punctuation.definition.string.end.dominions"
                name: "string.quoted.double.multiline.dominions"
            },

            {
                match: '^\\s*(#era)\\s+([0-4])'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.nation.property.dominions"
            },

            #Visuals.
            {
                match: '^\\s*(#flag)\\s+("[^"]+")'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "string.quoted.double.path.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#color|#secondarycolor)\\s+((?:0|1)\\.(?:\\d+))\\s+((?:0|1)\\.(?:\\d+))\\s+((?:0|1)\\.(?:\\d+))'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.color.dominions"
                    3:
                        name: "constant.numeric.color.dominions"
                    4:
                        name: "constant.numeric.color.dominions"
                name: "meta.nation.property.dominions"

            },

            #B. Sites, terrain and temperature.
            {
                match: "^\\s*(#clearsites)"
                captures:
                    1:
                        name: "keyword.control.nation.command.dominions"
                name: "meta.nation.command.dominions"
            },

            {
                match: '^\\s*(#startsite|#islandsite)\\s+("[^"]+")'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#uwnation|#coastnation|#riverstart|#islandnation)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#likesterr|#hatesterr)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#killcappop)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#idealcold)\\s+(-?[0-3])'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#cavenation)\\s+([0-2])'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.nation.property.dominions"
            },

            #C. AI hints.
            {
                match: '^\\s*(#aiholdgold|#aifirenation|#aiairnation|#aiwaternation|#aiearthnation|#aiastralnation|#aideathnation|#ainaturenation|#aibloodnation|#bloodnation|#aicheapholy|#aiholyranged)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#aiawake|#aigoodbless)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.percent.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#aimusthavemag)\\s+([0-7])'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.nation.property.dominions"
            },

            #D. Recruitment.
            #Some commands are in poptypes repository.
            {
                match: '^\\s*(#startcom|(?:#coastcom(?:1|2))|#addforeignunit|#addforeigncom|#(?:forest|mountain|swamp|waste|cave)rec|#(?:forest|mountain|swamp|waste|cave)com|#startscout|(?:#startunittype(?:1|2))|#uwrec|uwcom|(?:#coastunit(?:[1-3]))|#landrec|#landcom)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*((?:#startunitnbrs(?:1|2))|(?:#multihero(?:[1-7])))\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            #TODO: merccost argument is an integer percentage.
            {
                match: '^\\s*(#merccost|(?:#hero(?:10|[1-9])))\\s+(-?\\d+)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.nation.property.dominions"
            },

            #E. PD.
            #Some pd commands are in poptypes.
            {
                match: '^\\s*(#defcom2|(?:#uwdefcom(?:1|2))|(?:#defunit(?:2b|2))|(?:#uwdefunit(?:1b|1c|1d|2b|1|2)))\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#defmult(?:2b|2)|#uwdefmult(?:1b|1c|1d|2b|1|2))\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#wallunit|#wallcom|#uwwallunit|#uwwallcom)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: "^\\s*(#wallmult|#uwwallmult)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            #F. Gods.
            {
                match: "^\\s*(#cleargods)"
                captures:
                    1:
                        name: "keyword.control.nation.command.dominions"
                name: "meta.nation.command.dominions"
            },

            {
                match: '^\\s*(#homerealm)\\s+(10|[1-9])'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#addgod|#delgod)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#cheapgod(?:20|40))\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#likespop)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#uwbuild)\\s+(0|1)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#godrebirth|#noundeadgods)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#fireblessbonus|#airblessbonus|#waterblessbonus|#earthblessbonus|#astralblessbonus|#deathblessbonus|#natureblessbonus|#bloodblessbonus)\\s+([0-9])'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.nation.property.dominions"
            },

            #G. Buildings.
            {
                match: '^\\s*(#fortera)\\s+([0-4])'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#fortcost|#labcost|#templecost|#foresttemplecost|#forestlabcost)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#templegems)\\s+([0-7])'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.nation.property.dominions"
            },

            #Visuals.
            {
                match: '^\\s*(#templepic)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            #Fort commands.
            {
                match: '^\\s*(#homefort|#buildfort|#builduwfort|#buildcoastfort)\\s+([1-2][0-9]|30|[1-9])'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.fort.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#fortunrest)\\s+(-?\\d+)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.nation.property.dominions"
            },

            #H. Dominion.
            {
                match: '^\\s*(#nodeathsupply|#halfdeathinc|#halfdeathpop|#domdeathsense|#nopreach|#dyingdom|#sacrificedom|#autoundead)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#spreadcold|#spreadheat|#spreadlazy|#spreadchaos|#spreaddeath)\\s+([1-3])'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#nationinc|#castleprod|#tradecoast|#golemhp)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#recallgod|#domkill|#domunrest|#domwar)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#guardspirit)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#syncretism)\\s+(0|1)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.nation.property.dominions"
            },

            #I. Reanimation.
            {
                match: '^\\s*(#priestreanim|#undeadreanim|#horsereanim|#wightreanim|#tombwyrmnreanim|#manikinreanim|#supayareanim|#greekreanim|#ghostreanim)'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                name: "meta.nation.property.dominions"
            }
        ]

    spells:
        patterns: [
            #A. Commands.
            {
                match: "^\\s*(#clear)"
                captures:
                    1:
                        name: "keyword.control.spell.command.dominions"
                name: "meta.spell.command.dominions"
            },

            {
                match: '^\\s*(#copyspell)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.spell.command.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.spell.command.dominions"
            },

            #B. Basic Properties.
            {
                match:"^\\s*(#school)\\s+(-1|[0-7])"
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.spell.property.dominions"
            },

            {
                match:"^\\s*(#researchlevel)\\s+([0-9])"
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.spell.property.dominions"
            },

            {
                match:"^\\s*(#pathlevel|#path)\\s+(0|1)\\s+(-1|[0-8])"
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                    3:
                        name: "constant.numeric.enum.dominions"
                name: "meta.spell.property.dominions"
            },

            {
                match:"^\\s*(#fatiguecost)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.spell.property.dominions"
            },

            #C. Spell effects.
            #TODO: aoe has an area argument.
            #TODO: effect, nextingeo have (huge) enum arguments.
            {
                match:"^\\s*(#aoe|#nextingeo|#effect|#nreff|#range|#precision)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.spell.property.dominions"
            },

            {
                match:"^\\s*(#damage)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.spell.property.dominions"
            },

            {
                match: '^\\s*(#damagemon)\\s+("[^"]+")'
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                name: "meta.spell.property.dominions"
            },

            {
                match: '^\\s*(#nextspell)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.spell.property.dominions"
            },

            #D. Sound and visuals.
            {
                match:"^\\s*(#sound)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.spell.property.dominions"
            },

            {
                match:"^\\s*(#explspr|#flightspr)\\s+(-1|(?:\\d+))"
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "constant.numeric.number.dominions"
                name: "meta.spell.property.dominions"
            },

            {
                match: '^\\s*(#sample)\\s+("[^"]+")'
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "string.quoted.double.path.dominions"
                name: "meta.spell.property.dominions"
            },

            #E. Range and targeting.
            #TODO: onlygeosrc, nogeosrc, onlygeodst, nogeodst have terrain mask arguments.
            {
                match:"^\\s*(#provrange|#onlygeosrc|#nogeosrc|#onlygeodst|#nogeodst)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.spell.property.dominions"
            },

            {
                match: '^\\s*(#onlyatsite)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.spell.property.dominions"
            },

            {
                match:"^\\s*(#onlycoastsrc|#onlyfriendlydst|#onlyowndst|#nowatertrace|#nolandtrace|#walkable)\\s+(0|1)"
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.spell.property.dominions"
            },

            #E. Spell special attributes.
            #TODO: spec has a (huge) spec enum argument.
            #TODO: casttime argument varies between 1 and 1000.
            #TODO: notfornation argument is a nation number.
            {
                match:"^\\s*(#spec|#casttime|#notfornation|#maxbounces)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.spell.property.dominions"
            },

            {
                match: '^\\s*(#restricted|#farsumcom|#onlymnr)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.spell.property.dominions"
            },

            {
                match:"^\\s*(#godpathspell)\\s+(-1|[0-7])"
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.spell.property.dominions"
            },

            {
                match:"^\\s*(#friendlyench|#hiddenench|#nocastmindless|#spellreqfly|#polygetmagic)\\s+([0-1])"
                captures:
                    1:
                        name: "keyword.control.spell.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.spell.property.dominions"
            }
        ]

    items:
        patterns: [
            #A. Commands.
            {
                match: "^\\s*(#clear)"
                captures:
                    1:
                        name: "keyword.control.item.command.dominions"
                name: "meta.item.command.dominions"
            },

            {
                match: '^\\s*(#copyitem|#copyspr)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.item.command.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.item.command.dominions"
            },

            #B. Basic properties.
            {
                match: '^\\s*(#spr)\\s+("[^"]+")'
                captures:
                    1:
                        name: "keyword.control.item.property.dominions"
                    2:
                        name: "string.quoted.double.path.dominions"
                name: "meta.item.property.dominions"
            },

            {
                match:"^\\s*(#constlevel)\\s+(0|2|4|6|8|12)"
                captures:
                    1:
                        name: "keyword.control.item.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.item.property.dominions"
            },

            {
                match:"^\\s*(#mainpath)\\s+([0-7])"
                captures:
                    1:
                        name: "keyword.control.item.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.item.property.dominions"
            },

            {
                match:"^\\s*(#secondarypath)\\s+(-1|[0-7])"
                captures:
                    1:
                        name: "keyword.control.item.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.item.property.dominions"
            },

            {
                match:"^\\s*(#mainlevel|#secondarylevel)\\s+([0-8])"
                captures:
                    1:
                        name: "keyword.control.item.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.item.property.dominions"
            },

            {
                match:"^\\s*(#type)\\s+([1-9])"
                captures:
                    1:
                        name: "keyword.control.item.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.item.property.dominions"
            },

            {
                match: '^\\s*(#weapon|#armor)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.item.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.item.property.dominions"
            },

            #C. Magic and spells.
            #note: see monster_items for other magic and spell properties shared with items.
            {
                match: "^\\s*(#autospellrepeat)"
                captures:
                    1:
                        name: "keyword.control.item.property.magic.dominions"
                name: "meta.item.property.magic.dominions"
            },

            {
                match: '^\\s*(#spell|#autospell)\\s+("[^"]+")'
                captures:
                    1:
                        name: "keyword.control.item.property.magic.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                name: "meta.item.property.magic.dominions"
            },

            {
                match:"^\\s*(#pen)\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.item.property.magic.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.item.property.magic.dominions"
            },

            #D. Attributes.
            {
                match:"^\\s*(#luck|#quickness|#bless|#barkskin|#stoneskin|#ironskin|#bers|#extralife)"
                captures:
                    1:
                        name: "keyword.control.item.property.attribute.dominions"
                name: "meta.item.property.attribute.dominions"
            },

            #TODO: #reform command.

            #E. Movement.
            {
                match:"^\\s*(#waterbreathing|#fly|#run)"
                captures:
                    1:
                        name: "keyword.control.item.property.attribute.dominions"
                name: "meta.item.property.attribute.dominions"
            },

            {
                match:"^\\s*(#mapspeed)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.item.property.magic.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.item.property.magic.dominions"
            },

            #TODO: this probably should move elsewhere? Just following dom5 manual.
            {
                match:"^\\s*(#sneakunit)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.item.property.attribute.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.item.property.attribute.dominions"
            },

            #F. Arena.
            {
                match:"^\\s*(#champprize|#autocomplete)"
                captures:
                    1:
                        name: "keyword.control.item.property.attribute.dominions"
                name: "meta.item.property.attribute.dominions"
            },

            #G. Restrictions.
            {
                match:"^\\s*(#reqeyes|#nofind)"
                captures:
                    1:
                        name: "keyword.control.item.property.attribute.dominions"
                name: "meta.item.property.attribute.dominions"
            },

            {
                match:"^\\s*(#restricteditem)\\s+(\\d+)"
                captures:
                    1:
                        name: "keyword.control.item.property.attribute.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.item.property.attribute.dominions"
            },

            {
                match: '^\\s*(#restricted|#nationrebate)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.item.property.attribute.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.item.property.attribute.dominions"
            }

            #H. Curses and afflictions.
            {
                match:"^\\s*(#cursed|#nomounted|#curse|#nocoldblood|#disease|#nodemon|#chestwound|#noundead|#noinanim|#noimmobile|#feeblemind|#mute|#onlymounted|#onlycoldblood|#nhwound|#onlydemon|#crippled|#onlyundead|#looseeye|#onlyinanim|#immobileonly)"
                captures:
                    1:
                        name: "keyword.control.item.property.attribute.dominions"
                name: "meta.item.property.attribute.dominions"
            },

            #I. Undocumented dom5 commands.
            {
                match:"^\\s*(#autobless)"
                captures:
                    1:
                        name: "keyword.control.item.property.attribute.dominions"
                name: "meta.item.property.attribute.dominions"
            },

            #TODO: swift varies between -1000 and 1000.
            #TODO: itemcost varies between -100 and 10000.
            {
                match:"^\\s*(#swift|#itemcost[1-2])\\s+(-?\\d+)"
                captures:
                    1:
                        name: "keyword.control.item.property.attribute.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.item.property.attribute.dominions"
            }
        ]

    poptypes:
        patterns: [
            #A. Commands.
            {
                match: "^\\s*(#clearrec|#cleardef)"
                captures:
                    1:
                        name: "keyword.control.nation.command.dominions"
                name: "meta.nation.command.dominions"
            },

            {
                match: '^\\s*(#addrecunit|#addreccom)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.nation.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.nation.property.dominions"
            },

            {
                match: '^\\s*(#defcom1|#defunit(?:1b|1c|1d|1))\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.poptype.property.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.poptype.property.dominions"
            },

            {
                match: '^\\s*(#defmult(?:1b|1c|1d|1))\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.poptype.property.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.poptype.property.dominions"
            }
       ]

    events:
        patterns: [
            #A. Basic.
            {
                match: '^\\s*(#rarity)\\s+(10|11|12|13|-2|-1|0|1|2|5)'
                captures:
                    1:
                        name: "keyword.control.event.property.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.property.dominions"
            },

            #B. Requirements.
            #B. 1. Generic.
            {
                match: '^\\s*(#req_unique|#req_turn|#req_maxturn|#req_pregame)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_rare)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_story|#req_indepok)\\s+(0|1)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_era|#req_noera)\\s+([0-2])'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_season|#req_noseason)\\s+([0-3])'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            #B. 2. Nation.
            #TODO: argument is a nation number.
            {
                match: '^\\s*(#req_nation|#req_nonation|#req_fornation|#req_notfornation|#req_notnation|#req_notforally)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.requirement.dominions"
            },

            #B. 3. Treasury.
            {
                match: '^\\s*(#req_gem)\\s+([0-7])'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_gold)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.requirement.dominions"
            },

            #B. 4. Province.
            {
                match: '^\\s*(#req_pop0ok)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_capital|#req_owncapital|#req_lab|#req_temple|#req_fort)\\s+(0|1)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            #Terrain.
            {
                match: '^\\s*(#req_land|#req_coast|#req_mountain|#req_forest|#req_farm|#req_swamp|#req_waste|#req_cave|#req_freshwater)\\s+(0|1)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            #TODO: req_poptype argument is a poptype.
            {
                match: '^\\s*(#req_poptype|#req_maxpop|#req_minpop|#req_mindef|#req_maxdef|#req_minunrest|#req_maxunrest)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.requirement.dominions"
            },

            #B. 5. Site.
            {
                match: '^\\s*(#req_foundsite|#req_hiddensite|#req_site|#req_nearbysite|#req_claimedthrone|#req_unclaimedthrone)\\s+(0|1)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            #TODO: req_nositenbr argument is a site number.
            {
                match: '^\\s*(#req_freesites|#req_nositenbr)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.requirement.dominions"
            },

            #B. 6. Dominion.
            #TODO: argument is a site number.
            {
                match: '^\\s*(#req_fullowner|#req_domowner)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_mydominion)\\s+(0|1)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_dominion)\\s+(10|[0-9])'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_maxdominion)\\s+(-?10|[0-9])'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            #TODO: percentage capped to 100.
            {
                match: '^\\s*(#req_maxdominion)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.event.requirement.dominions"
            },

            #B. 7. Scales.
            {
                match: '^\\s*(#req_chaos|#req_lazy|#req_cold|#req_death|#req_unluck|#req_unmagic|#req_order|#req_prod|#req_heat|#req_growth|#req_luck|#req_magic)\\s+(-?[0-3])'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            #B. 8. Monster.
            {
                match: '^\\s*(#req_humanoidres|#req_researcher)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_commander)\\s+(0|1)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_preach|#req_mintroops|#req_maxtroops)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_monster|#req_2monsters|#req_5monsters|#req_nomonster|#req_mnr|#req_nomnr|#req_deadmnr)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.requirement.dominions"
            },

            #B. 9. Mage.
            {
                match: '^\\s*(#req_pathfire|#req_pathair|#req_pathwater|#req_pathearth|#req_pathastral|#req_pathdeath|#req_pathnature|#req_pathblood|#req_pathholy|#req_nopathfire|#req_nopathair|#req_nopathwater|#req_nopathearth|#req_nopathastral|#req_nopathdeath|#req_nopathnature|#req_nopathblood|#req_nopathholy|#req_nopathall)\\s+(10|[0-9])'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            #B. 10. Target requirements.
            {
                match: '^\\s*(#req_targgod|#req_targhumanoid|#req_targmale|#req_targundead|#req_targdemon|#req_targanimal|#req_targinanimate|#req_targmindless|#req_targimmobile|#req_targmagicbeing)\\s+(0|1)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_targpath[1-4])\\s+([0-8])'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_targmnr)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_targitem|#req_targnoitem)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.requirement.dominions"
            },

            #TODO: req_targaff argument is an affliction number.
            #TODO: req_targorder argument is an order number.
            #TODO: req_targowner argument is a nation number.
            {
                match: '^\\s*(#req_targaff|#req_targorder|#req_targowner)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.requirement.dominions"
            },

            {
                match: '^\\s*(#req_targforeignok)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                name: "meta.event.requirement.dominions"
            },

            #B. 11. Event code.
            #Arguments are event id numbers.
            {
                match: '^\\s*(#req_code|#req_anycode|#req_notanycode|#req_nearbycode|#req_nearowncode)\\s+(-?\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.event.requirement.dominions"
            },

            #B. 12. Enchantments.
            {
                match: '^\\s*(#req_permonth|#req_noench|#req_ench|#req_myench|#req_friendlyench|#req_hostileench|#req_enchdom)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.requirement.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.requirement.dominions"
            },

            #C. Effects.
            #C. 1. Generic.
            {
                match: '^\\s*(#notext|#nolog)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                name: "meta.event.effect.dominions"
            },

            #TODO: argument is a nation number with -1 and -2 special cased. Default is independents.
            {
                match: '^\\s*(#nation)\\s+(-1|-2|\\d+)?'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.event.effect.dominions"
            },

            #TODO: argument is an active global number.
            {
                match: '^\\s*(#nationench)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                begin: "^\\s*(#msg)\\s+(\")"
                captures:
                    1:
                        name: "keyword.control.event.effect.multiline.dominions"
                    2:
                        name: "punctuation.definition.string.begin.dominions"
                end: "(\\[.+\\]\\s*)?(\")"
                endCaptures:
                    1:
                        name: "variable.language.event.effect.dominions"
                    2:
                        name: "punctuation.definition.string.end.dominions"
                name: "string.quoted.double.multiline.dominions"
            },

            #C. 2. Treasure.
            {
                match: '^\\s*(#magicitem)\\s+(0|1|2|3|4|9)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#gold|#exactgold)\\s+(-?\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#gemloss|#(?:(?:1d3|1d6|2d4|2d6|3d6|4d6)vis))\\s+([0-7])'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            #C. 3. Scales.
            {
                match: '^\\s*(#incscale(?:(?:2|3)?))\\s+([0-5])'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#decscale(?:(?:2|3)?))\\s+([0-5])'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            #C. 4. Province.
            {
                match: '^\\s*(#landgold|#landprod|#taxboost|#defence|#unrest)\\s+(-?\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#taxboost|#kill|#emigration)\\s+(-?\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.event.effect.dominions"
            },

            #TODO: fort argument is a fort number.
            {
                match: '^\\s*(#killpop|#incpop|inccorpses|#fort)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#incdom|#newdom)\\s+(-?(?:10|[1-9]))'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#temple|#lab)\\s+(0|1)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#addsite|#hiddensite|#removesite)\\s+(-1|\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#revealsite|#visitors|#revolt|#revealprov|#claimthrone)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                name: "meta.event.effect.dominions"
            },

            #C. 5. Monster.
            {
                match: '^\\s*((?:#(?:2|4|5)?com)|#assassin|#stealthcom|#transform)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#tempunits)\\s+(0|1)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#1unit)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#(?:1d3|(?:(?:1)?[0-9]d6))units)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.effect.dominions"
            },

            #TODO: researchaff, gainaff arguments are affliction bitmasks.
            {
                match: '^\\s*(#strikeunits|#researchaff|#gainaff|#poison|#xp)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#curse|#disease)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#killmon|#kill2d6mon|#killcom)\\s+(?:("[^"]+")|(\\d+))'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#gainmark)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#banished)\\s+(-11|-12|-13)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#addequip)\\s+([1-4])'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            #C. 6. Magic boosts.
            {
                match: '^\\s*(#(?:fire|air|water|earth|astral|death|nature|blood|holy)boost)(?:\\s+(?:("[^"]+")|(\\d+))?)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "string.quoted.double.dominions"
                    3:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#pathboost)\\s+([0-8])'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            #C. 7. Global.
            {
                match: '^\\s*(#worldincscale(?:(?:2|3)?))\\s+([0-5])'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#worlddecscale(?:(?:2|3)?))\\s+([0-5])'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#worldritrebate)\\s+([0-7])'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#worldunrest|#worldage)\\s+(-?\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#worldincdom)\\s+(-?10|[1-9])'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#linger)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#worldcurse|#worlddisease|#worldmark|#worldheal)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.percentage.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#worlddarkness)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                name: "meta.event.effect.dominions"
            },

            #C. 8. Special event.
            {
                match: '^\\s*(#flagland)\\s+(0|1)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#delay(?:25|50)?)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.effect.dominions"
            },

            #TODO: order argument is an order bitmask.
            {
                match: '^\\s*(#order)\\s+(\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.positive.dominions"
                name: "meta.event.effect.dominions"
            },

            #C. 9. Event code.
            {
                match: '^\\s*((?:#code(?:2)?)|#resetcode|#id)\\s+(-?\\d+)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.integer.dominions"
                name: "meta.event.effect.dominions"
            },

            {
                match: '^\\s*(#purgecalendar|#purgedelayed)\\s+(-1|1)'
                captures:
                    1:
                        name: "keyword.control.event.effect.dominions"
                    2:
                        name: "constant.numeric.enum.dominions"
                name: "meta.event.effect.dominions"
            }
        ]
